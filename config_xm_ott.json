[{"url":"^(http\\:\\\/\\\/)(m\\.tv\\.sohu\\.com\\\/.*|v\\.youku\\.com\\\/v_show\\\/id_.*|www\\.tudou\\.com\\\/.+|m\\.iqiyi\\.com\\\/.+|m\\.56\\.com\\\/.+|m\\.letv\\.com\\\/vplay.+|m\\.ku6\\.com\\\/show\\\/.+|v\\.ifeng\\.com\\\/.+)$","tpl":"\r\nwindow.PLAY_URL = (window.netip && window.netip!='')? 'http:\/\/'+window.netip+':8080\/app\/reveal\/?u=' : 'http:\/\/api-dev.vsea.tv\/app\/reveal\/?u=';\r\nwindow.MERGE_URL = (window.netip && window.netip!='')? 'http:\/\/'+window.netip+':8080\/app\/reveal\/?u=' : 'http:\/\/172.25.3.116:8080\/app\/reveal\/?u=';\r\nwindow.OTT_API = '';\r\nwindow.SHOW_TAB = 'no';(function(){\r\n\tconsole.log('init check')\r\n\tvar url = window.location.href;\r\n\tvar body = document.documentElement.outerHTML;\r\n\tvar m = null, m2 = null;\r\n\tvar src = null;\r\n\r\n\tvar img, title;\r\n\r\n\tvar data = {\r\n\t\timg: null,\r\n\t\ttitle: null,\r\n\t\tm_url: null\r\n\t};\r\n\t\/\/ &seek=OTT\r\n\tvar ext = '&playmode=play';\r\n\r\n\r\n\tvar getRevealUrl = function (u) {\r\n\t\treturn [PLAY_URL+encodeURIComponent(u)+ext, MERGE_URL+encodeURIComponent(u)+ext+'&mode=getMergeUrl&seek=OTT'];\r\n\t};\r\n\r\n\tvar returnPageData = function (force) {\r\n\t\tif ( force || (data && data.img && data.m_url) ) {\r\n\t\t\tif ( !(data && data.m_url) ) {\r\n\t\t\t\tdocument.cookie = \"pagedata=null;\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar s = JSON.stringify(data);\r\n\t\t\tdocument.cookie = \"pagedata=\"+escape(s)+';';\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t\/\/ http:\/\/v.youku.com\/v_show\/id_XNTkyNjY1NjQ0.html?f=19532522&ev=1\r\n\tif ( null != (m=url.match(\/^http\\:\\\/\\\/v\\.youku\\.com\\\/v_show\\\/id_([^\\&\\\/\\.]*).*$\/i)) ) {\r\n\t\t\/\/ youku\r\n\t\tvar vid=m[1];\r\n\t\tsrc=getRevealUrl(\"http:\/\/v.youku.com\/v_show\/id_\"+vid+\".html\");\r\n\r\n\r\n\t\twindow.__check_getYoukuData = function (d) {\r\n\t\t\tif (d && d.data && d.data[0]) {\r\n\t\t\t\tdata.img = d.data[0].logo;\r\n\t\t\t\tdata.title = d.data[0].title;\r\n\t\t\t}\r\n\t\t\treturnPageData();\r\n\t\t};\r\n\r\n\t\tvar e=document.createElement('script'); \r\n\t\te.setAttribute('src', 'http:\/\/v.youku.com\/player\/getPlaylist\/VideoIDS\/'+vid+'\/Pf\/4?__callback=__check_getYoukuData'); \r\n\t\tdocument.head.appendChild(e);\r\n\r\n\r\n\r\n\t} else if ( null != (m=url.match(\/tv.sohu.com\/i)) && null != (m=body.match(\/\\s+vid\\s*[\\:\\=]\\s*\\\"(\\d+)\\\"\/i)) && null != (m2=body.match(\/og\\:url.*?content\\=\\\"(.+?)\\\"\/i)) ) {\r\n\t\t\/\/ sohu\r\n\t\text += '&iid='+m[1];\r\n\t\tsrc=getRevealUrl(m2[1]);\r\n\t\tif ( null != (img=body.match(\/apple-touch-icon-precomposed.*?href=\\\"(.*?)\\\"\/i)) && null != (title=body.match(\/keywords.*?content=\\\"(.*?)\\\"\/i)) ) {\r\n\t\t\tdata.img = img[1];\r\n\t\t\tdata.title = title[1];\r\n\t\t}\r\n\t} else if ( null != (m=url.match(\/.*tudou.com.*\/i)) && window.itemData ) {\r\n\t\tvar _d = window.itemData;\r\n\t\tif (_d.vcode && _d.vcode!='') {\r\n\t\t\text += '&vcode='+_d.vcode;\r\n\t\t} else {\r\n\t\t\text += '&iid='+_d.iid;\r\n\t\t}\r\n\t\tsrc = getRevealUrl(url);\r\n\t\tdata.img = _d.pic;\r\n\t\tdata.title = _d.kw;\r\n\r\n\t\tvar lastVid = false;\r\n\t\tvar checkChange = function () {\r\n\t\t\tif (window.itemData) {\r\n\t\t\t\tvar v = window.itemData;\r\n\t\t\t\tif (!lastVid) {\r\n\t\t\t\t\tlastVid = v.iid;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (v.iid != lastVid) {\r\n\t\t\t\t\tconsole.log('tudou get new location');\r\n\t\t\t\t\tclearInterval(checkChangeI);\r\n\t\t\t\t\tif (v.acode && v.acode != '')\r\n\t\t\t\t\t\twindow.location.href='http:\/\/www.tudou.com\/albumplay\/'+v.acode+'\/'+v.icode+'.html';\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\twindow.location.href='http:\/\/www.tudou.com\/programs\/view\/'+v.icode+'\/';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar checkChangeI=setInterval(checkChange, 50);\r\n\t\t\r\n\t} else if ( null != (m=url.match(\/.*letv.com.*\/i)) && (\r\n\t\tnull != (m=url.match(\/m\\.letv\\.com\\\/vplay\\_(.*?)\\.html.*\/i)) ||\r\n\t\tnull != (m=url.match(\/www\\.letv\\.com\\\/ptv\\\/vplay\\\/(.*?)\\.html.*\/i))\r\n\t\t) ) {\r\n\t\tvar leurl = 'http:\/\/www.letv.com\/ptv\/vplay\/'+m[1]+'.html';\r\n\t\tsrc = getRevealUrl(leurl);\r\n\t\tif ( null != (title=body.match(\/title\\s*:\\s*[\\\"\\'](.*?)[\\\"\\']\/i)) && null != (img=body.match(\/apple-touch-icon-precomposed.*?href=\\\"(.*?)\\\"\/i)) ) {\r\n\t\t\tdata.img = img[1];\r\n\t\t\tdata.title = title[1];\r\n\t\t}\r\n\r\n\t} else if ( null != (m=url.match(\/.*sina.cn.*\/i)) && null != (m=body.match(\/location\\.php\\?.*?url\\=([^\\&\\'\\\"]+)\/i)) ) {\r\n\t\tvar u = decodeURIComponent(m[1]);\r\n\t\tsrc = getRevealUrl(u);\r\n\t\tif ( null != (img=body.match(\/poster=\\\"(.*?)\\\"\/i)) && null != (title=body.match(\/<h2>(.*?)<\\\/h2>\/i)) ) {\r\n\t\t\tdata.img = img[1];\r\n\t\t\tdata.title = title[1];\r\n\t\t}\r\n\t} else if ( null != (m=url.match(\/.*56.com.*\/i)) && null != (m=body.match(\/src\\=\\\"http\\:\\\/\\\/vxml.56.com\\\/html5\\\/(\\d+)\\\/\/i)) ) {\r\n\t\text += '&iid='+m[1];\r\n\t\tsrc = getRevealUrl(url);\r\n\t\tif ( null != (img=body.match(\/url\\((.*?)\\)\/i)) && null != (title=body.match(\/keywords.*?content=\\\"(.*?)\\\"\/i)) ) {\r\n\t\t\tdata.img = img[1];\r\n\t\t\tdata.title = title[1];\r\n\t\t}\r\n\t} else if ( null != (m=url.match(\/.*m\\.iqiyi\\.com\\\/play.html.*?tvid\\=([^\\&]+).*?vid\\=([^\\&]+)\/i)) ) {\r\n\t\t\r\n\t\text += '&iid='+m[1]+'_'+m[2];\r\n\t\tif (window.tvInfoJs) {\r\n\t\t\tdata.img = window.tvInfoJs.vpic;\r\n\t\t\tdata.title = window.tvInfoJs.vn;\r\n\t\t\tsrc = getRevealUrl(window.tvInfoJs.vu);\r\n\t\t} else {\r\n\t\t\tsrc = getRevealUrl(url);\r\n\t\t}\r\n\r\n\t\tvar lastVid = false;\r\n\t\tvar checkChange = function () {\r\n\t\t\tif (window.tvInfoJs) {\r\n\t\t\t\tvar v = window.tvInfoJs;\r\n\t\t\t\tif (!lastVid) {\r\n\t\t\t\t\tlastVid = v.vid;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (v.vid != lastVid) {\r\n\t\t\t\t\tconsole.log('iqiyi get new location')\r\n\t\t\t\t\tclearInterval(checkChangeI);\r\n\t\t\t\t\twindow.location.href='http:\/\/m.iqiyi.com\/play.html?tvid='+v.tvid+'&vid='+v.vid;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar checkChangeI=setInterval(checkChange, 50);\r\n\r\n\r\n\t\tvar fixClickTime = 1000;\r\n\t\tvar fixClick = function () {\r\n\t\t\tvar _a = document.getElementsByTagName('a');\r\n\t\t\tfor (var i = 0; i < _a.length; i++) {\r\n\t\t\t\tif (_a[i].getAttribute('data-delegate') == 'play') {\r\n\t\t\t\t\t_a[i].setAttribute('data-delegate', 'go');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetTimeout(arguments.callee, fixClickTime);\r\n\t\t};\r\n\t\t\r\n\t\tfixClick();\r\n\r\n\t} else if ( null != (m=url.match(\/.*m.(ku6.com.*)\/i)) ) {\r\n\t\tsrc = getRevealUrl('http:\/\/v.'+m[1]);\r\n\t\tif ( null != (img=body.match(\/vid,\\s*\\'(.*?)\\'\/i)) && null != (title=body.match(\/<title>(.*?)<\\\/title>\/i)) ) {\r\n\t\t\tdata.img = img[1];\r\n\t\t\tdata.title = title[1];\r\n\t\t}\r\n\t} else if ( null != (m=url.match(\/.*v\\.ifeng\\.com.*\/i)) && null != (m=url.match(\/.*?[\\\/\\#]([\\w\\d]+\\-[\\w\\d]+\\-[\\w\\d]+\\-[\\w\\d]+\\-[\\w\\d]+).*\/i)) ) {\r\n\t\text += '&iid='+m[1];\r\n\t\tsrc = getRevealUrl(url);\r\n\t\tif ( null != (img=body.match(\/image\\\"\\s*content\\=\\\"(.*?)\\\"\/i)) && null != (title=body.match(\/title\\\"\\s*content\\=\\\"(.*?)\\\"\/i)) ) {\r\n\t\t\tdata.img = img[1];\r\n\t\t\tdata.title = title[1];\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tif ( null != src && '' != src ) {\r\n\t\tvar appendBtn = function () {\r\n\t\t\tdata.m_url = src[0]+'&quality=0';\r\n\r\n\t\t\tvar mu = [src[1]+'&quality=0', src[1]+'&quality=1', src[1]+'&quality=2'];\r\n\t\t\tdata.ottsd_url= mu[1];\r\n\t\t\tdata.otthd_url= mu[2];\r\n\t\t\treturnPageData();\r\n\t\t};\r\n\r\n\t\tappendBtn();\r\n\t} else {\r\n\t\tdata = null;\r\n\t\treturnPageData(true);\r\n\t}\r\n\r\n\r\n\treturnPageData();\r\n})();\r\n","type":"1"},{"url":"^(http\\:\\\/\\\/)[^\\\/]+\\\/app\\\/(vqq|yinyuetai)\\\/.*$","tpl":"\r\nwindow.PLAY_URL = (window.netip && window.netip!='')? 'http:\/\/'+window.netip+':8080\/app\/reveal\/?u=' : 'http:\/\/api-dev.vsea.tv\/app\/reveal\/?u=';\r\nwindow.MERGE_URL = (window.netip && window.netip!='')? 'http:\/\/'+window.netip+':8080\/app\/reveal\/?u=' : 'http:\/\/172.25.3.116:8080\/app\/reveal\/?u=';\r\nwindow.OTT_API = '';\r\nwindow.SHOW_TAB = 'no';","type":"1"}]